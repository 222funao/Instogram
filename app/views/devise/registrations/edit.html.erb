<h2 class="edit-title">Editar perfil</h2>

<%= form_for(resource, as: resource_name,
             url: registration_path(resource_name),
             html: { method: :put, multipart: true }) do |f| %>

  <div class="edit-card">

    <div class="avatar-upload">
    <label for="user_avatar" class="avatar-label">
      <div class="avatar-preview">
  <% if current_user.avatar.attached? %>
    <%= image_tag current_user.avatar, class: "avatar-img" %>
  <% else %>
    <span>+</span>
  <% end %>
</div>

      <p>Foto de perfil</p>
    </label>

    <%= f.file_field :avatar, id: "user_avatar", class: "avatar-input" %>
  </div>

    <div class="field">
      <%= f.label :username, "Nombre de usuario" %>
      <%= f.text_field :username %>
    </div>

    <div class="field">
      <%= f.label :email %>
      <%= f.email_field :email %>
    </div>

    <div class="field">
      <%= f.label :password, "Nueva contraseña" %>
      <%= f.password_field :password %>
    </div>

    <div class="field">
      <%= f.label :password_confirmation %>
      <%= f.password_field :password_confirmation %>
    </div>

    <div class="field">
      <%= f.label :current_password, "Contraseña actual" %>
      <%= f.password_field :current_password, required: true %>
    </div>

    <div class="actions">
      <%= f.submit "Guardar cambios" %>
    </div>

  </div>

<% end %>
